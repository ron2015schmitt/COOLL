#!/bin/bash


# place the current path into the Makefiles
temp=`pwd | sed -e 's/\//\\\\\//g'`

echo "creating Makefile ..."
echo "  " > Makefile
echo "# ********  AUTOMATICALLY CREATED FILE AT CONFIGURATION **********" >>Makefile
echo "# ********  THIS FILE SHOULD NOT BE STORED TO GIT       **********" >>Makefile
sed -e "s/#MATRICKS_DIR#/$temp/g" files/Makefile.vars >> Makefile 
cat  files/Makefile.matricks >> Makefile


echo "creating examples/Makefile ..."
mkdir -p examples
echo "  " > examples/Makefile
echo "# ********  AUTOMATICALLY CREATED FILE AT CONFIGURATION **********" >> examples/Makefile
echo "# ********  THIS IS THE EXAMPLE USER MAKEFILE           **********" >> examples/Makefile
sed -e "s/#MATRICKS_DIR#/$temp/g" files/Makefile.vars >> examples/Makefile
cat  files/Makefile.user >> examples/Makefile

# make the object file library (libmatricks.a)
echo "creating libmatricks.a ..."
cd src
make libmatricks.a
cd ..
mkdir -p lib && mv src/libmatricks.a lib/



