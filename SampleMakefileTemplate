
# This is a sample makefile that you can use to compile and link code
# to the MATRICKS library

# This Make file assumes that GNU compilers will be used

#****** THIS VARIABLE POINTS TO THE LIBRARY THAT YOU ARE USING ********
MATRICKS ?= #MATRICKS#

COPTS = 
LOPTS =


# A certain amount of optimization is necessary 
OPTIMIZATIONS = -finline-functions  -finline-limit=750 -O1
CXXOPT = -Wall -W -Wconversion $(OPTIMIZATIONS)
CXX = /usr/bin/g++ 


INCLUDES = -I $(MATRICKS) 

VPATH = $(MATRICKS)

LIBS = -L$(MATRICKS)/lib -lmatricks

CXXFLAGS =  $(CXXOPT)  $(COPTS) $(INCLUDES)

LDFLAGS =  $(LOPTS) 

#prevent any default rules from being used
.SUFFIXES:

# don't delete .o files
.PRECIOUS: %.o


clean:
	\rm -f *.o
	\rm -f $(EXEC)
	\rm -f $(LAPACKEXEC)
	\rm -f core.*
	\rm -f *.s
	\rm -f *.temp


%.o: %.cpp  $(LIBFILES) 
ifdef CAREFUL
	$(CXX) $(CXXFLAGS) -D"MATRICKS_CAREFUL=1" -c $*.cpp -o $@
else
	$(CXX) $(CXXFLAGS) -c $*.cpp -o $@
endif



%: %.o 
	$(CXX) $(LDFLAGS) $*.o -o $@ $(LIBS) 

